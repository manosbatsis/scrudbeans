// -------------------- DO NOT EDIT -------------------
//  This file is automatically generated by scrudbeans,
//  see https://manosbatsis.github.io/scrudbeans
//  To edit this file, copy it to the appropriate package 
//  in your src/main/kotlin folder and edit there. 
// ----------------------------------------------------
package mykotlinpackage.model

import com.github.manosbatsis.scrudbeans.api.`annotation`.IdentifierAdapterBean
import com.github.manosbatsis.scrudbeans.api.exception.NotFoundException
import com.github.manosbatsis.scrudbeans.api.mdd.model.IdentifierAdapter
import java.lang.Class
import java.lang.IllegalArgumentException
import java.lang.StringBuilder
import kotlin.Any
import kotlin.Boolean
import kotlin.String
import org.springframework.context.`annotation`.Lazy
import org.springframework.core.convert.ConversionService
import org.springframework.stereotype.Component

@Component
@IdentifierAdapterBean(className = "mykotlinpackage.model.ProductRelationship")
public class ProductRelationshipIdentifierAdapter(
  @Lazy
  private val conversionService: ConversionService,
) : IdentifierAdapter<ProductRelationship, ProductRelationshipIdentifier> {
  public override val entityType: Class<ProductRelationship> = ProductRelationship::class.java

  public override val entityIdType: Class<ProductRelationshipIdentifier> =
      ProductRelationshipIdentifier::class.java

  public override val isCompositeId: Boolean = true

  public override fun getId(resource: Any?): ProductRelationshipIdentifier? {
    if(resource == null) return null
    if(resource !is ProductRelationship) throw
        IllegalArgumentException("""Incompatible type ${resource::class.java.canonicalName} should be ProductRelationship""")
    val noNullMsg =
        "Property find entity for string representation of mykotlinpackage.model.ProductRelationshipIdentifier or one of it' components"
    return resource.id
  }

  public override fun getIdAsString(resource: Any?): String? = convertIdToString(getId(resource))

  public override fun buildIdFromString(from: String?): ProductRelationshipIdentifier? {
    if(from == null) return null
    val notfoundMsg =
        "Cannot find entity for string representation of mykotlinpackage.model.ProductRelationshipIdentifier or one of it' components"
    val idComponents = from.split("_")
    if(idComponents.size != 2) throw
        IllegalArgumentException("String representation of mykotlinpackage.model.ProductRelationshipIdentifier must have 2 non-blank components")
    // compositeIdFieldNames: left,right
    return ProductRelationshipIdentifier(
      left = conversionService.convert(idComponents[0], Product::class.java)
        ?: throw NotFoundException(notfoundMsg),
      right = conversionService.convert(idComponents[1], Product::class.java)
        ?: throw NotFoundException(notfoundMsg)
    )
  }

  public override fun convertIdToString(resourceId: ProductRelationshipIdentifier?): String? {
    if(resourceId == null) return null
    return StringBuilder()
      .append(conversionService.convert(resourceId.left
        ?: throw IllegalArgumentException(incompleteIdMsg), String::class.java))
      .append("_")
      .append(conversionService.convert(resourceId.right
        ?: throw IllegalArgumentException(incompleteIdMsg), String::class.java))
      .toString()
  }

  public companion object {
    public val incompleteIdMsg: String =
        "Cannot build string representation from incomplete mykotlinpackage.model.ProductRelationshipIdentifier"
  }
}
